<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–¢—Ä–µ–π–¥–∏–Ω–≥</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css">
</head>
<body>
    <!-- –í–µ—Ä—Ö–Ω—è—è –ø–∞–Ω–µ–ª—å —Å –±–∞–ª–∞–Ω—Å–æ–º -->
    <div class="top-bar">
        <div class="user-info">
            <span id="userName">–ì–æ—Å—Ç—å</span>
            <div class="balance-display">
                <span class="balance-label">–ë–∞–ª–∞–Ω—Å:</span>
                <span id="balanceAmount" class="balance-amount">$1,000.00</span>
            </div>
        </div>
        <button class="buy-stars-btn" onclick="openBuyMenu()">
            ‚≠ê –ö—É–ø–∏—Ç—å $
        </button>
    </div>

    <!-- Swiper –¥–ª—è –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ–≥–æ –ª–∏—Å—Ç–∞–Ω–∏—è -->
    <div class="swiper-container">
        <div class="swiper-wrapper">
            
            <!-- –°–õ–ê–ô–î 1: –¢—Ä–µ–π–¥–∏–Ω–≥ -->
            <div class="swiper-slide trading-slide">
                <div class="slide-header">
                    <h2>üí∞ –¢—Ä–µ–π–¥–∏–Ω–≥</h2>
                    <div class="pnl-display">
                        <span>P&L:</span>
                        <span id="pnlAmount" class="pnl-amount">$0.00</span>
                    </div>
                </div>

                <!-- –ì—Ä–∞—Ñ–∏–∫ -->
                <div class="chart-container">
                    <canvas id="priceChart"></canvas>
                </div>

                <!-- –í—ã–±–æ—Ä –º–æ–Ω–µ—Ç—ã -->
                <div class="coin-selector">
                    <div class="coin-buttons">
                        <button class="coin-btn active" data-coin="BTC">BTC</button>
                        <button class="coin-btn" data-coin="ETH">ETH</button>
                        <button class="coin-btn" data-coin="DOGE">DOGE</button>
                    </div>
                    <div class="price-info">
                        <span id="currentCoin">BTC</span>
                        <span id="currentPrice">$50,000.00</span>
                        <span id="priceChange" class="positive">+2.5%</span>
                    </div>
                </div>

                <!-- –¢–æ—Ä–≥–æ–≤—ã–µ –∫–Ω–æ–ø–∫–∏ -->
                <div class="trade-controls">
                    <div class="leverage-selector">
                        <span>–ü–ª–µ—á–æ:</span>
                        <select id="leverageSelect">
                            <option value="2">2x</option>
                            <option value="5">5x</option>
                            <option value="10">10x</option>
                        </select>
                    </div>
                    
                    <div class="trade-buttons">
                        <button class="trade-btn buy-btn" onclick="openTrade('LONG')">
                            <span class="btn-icon">üìà</span>
                            <span class="btn-text">–õ–û–ù–ì</span>
                        </button>
                        <button class="trade-btn sell-btn" onclick="openTrade('SHORT')">
                            <span class="btn-icon">üìâ</span>
                            <span class="btn-text">–®–û–†–¢</span>
                        </button>
                    </div>
                </div>

                <!-- –ê–∫—Ç–∏–≤–Ω—ã–µ —Å–¥–µ–ª–∫–∏ -->
                <div class="active-trades-section">
                    <h3>–ê–∫—Ç–∏–≤–Ω—ã–µ —Å–¥–µ–ª–∫–∏</h3>
                    <div id="activeTradesList" class="trades-list">
                        <!-- –°–¥–µ–ª–∫–∏ –±—É–¥—É—Ç –∑–¥–µ—Å—å -->
                    </div>
                </div>
            </div>

            <!-- –°–õ–ê–ô–î 2: –†–µ–π—Ç–∏–Ω–≥ -->
            <div class="swiper-slide ranking-slide">
                <div class="slide-header">
                    <h2>üèÜ –†–µ–π—Ç–∏–Ω–≥ –∏–≥—Ä–æ–∫–æ–≤</h2>
                    <button class="refresh-btn" onclick="loadRanking()">üîÑ</button>
                </div>
                
                <div class="ranking-list" id="rankingList">
                    <!-- –†–µ–π—Ç–∏–Ω–≥ –±—É–¥–µ—Ç –∑–¥–µ—Å—å -->
                    <div class="loading">–ó–∞–≥—Ä—É–∑–∫–∞ —Ä–µ–π—Ç–∏–Ω–≥–∞...</div>
                </div>
            </div>

            <!-- –°–õ–ê–ô–î 3: –ò—Å—Ç–æ—Ä–∏—è -->
            <div class="swiper-slide history-slide">
                <div class="slide-header">
                    <h2>üìä –ò—Å—Ç–æ—Ä–∏—è —Å–¥–µ–ª–æ–∫</h2>
                    <div class="stats-summary">
                        <span>–í—Å–µ–≥–æ: <span id="totalTrades">0</span></span>
                        <span>–ü—Ä–æ—Ñ–∏—Ç: <span id="totalProfit" class="positive">$0</span></span>
                    </div>
                </div>
                
                <div class="history-list" id="historyList">
                    <!-- –ò—Å—Ç–æ—Ä–∏—è –±—É–¥–µ—Ç –∑–¥–µ—Å—å -->
                    <div class="empty-history">–ù–µ—Ç —Å–¥–µ–ª–æ–∫</div>
                </div>
            </div>

            <!-- –°–õ–ê–ô–î 4: –ú–∞–≥–∞–∑–∏–Ω -->
            <div class="swiper-slide shop-slide">
                <div class="slide-header">
                    <h2>üõí –ú–∞–≥–∞–∑–∏–Ω</h2>
                    <div class="stars-balance">
                        <span>–í–∞—à–∏ Stars:</span>
                        <span id="userStars">0 ‚≠ê</span>
                    </div>
                </div>
                
                <div class="shop-items">
                    <h3>–ö—É–ø–∏—Ç—å –¥–æ–ª–ª–∞—Ä—ã –∑–∞ Telegram Stars</h3>
                    
                    <div class="stars-packages">
                        <div class="package" onclick="buyPackage(100, 10)">
                            <div class="package-header">
                                <span class="stars-count">100 ‚≠ê</span>
                                <span class="package-price">$10</span>
                            </div>
                            <div class="package-bonus">+1% –±–æ–Ω—É—Å</div>
                            <button class="buy-package-btn">–ö—É–ø–∏—Ç—å</button>
                        </div>
                        
                        <div class="package" onclick="buyPackage(500, 55)">
                            <div class="package-header">
                                <span class="stars-count">500 ‚≠ê</span>
                                <span class="package-price">$55</span>
                            </div>
                            <div class="package-bonus">+10% –±–æ–Ω—É—Å</div>
                            <button class="buy-package-btn">–ö—É–ø–∏—Ç—å</button>
                        </div>
                        
                        <div class="package" onclick="buyPackage(1000, 120)">
                            <div class="package-header">
                                <span class="stars-count">1000 ‚≠ê</span>
                                <span class="package-price">$120</span>
                            </div>
                            <div class="package-bonus">+20% –±–æ–Ω—É—Å</div>
                            <button class="buy-package-btn">–ö—É–ø–∏—Ç—å</button>
                        </div>
                    </div>
                    
                    <div class="stars-info">
                        <p>‚≠ê 1 Telegram Star ‚âà $0.01</p>
                        <p>üí∞ –î–µ–Ω—å–≥–∏ —Å—Ä–∞–∑—É –Ω–∞ —Ç–æ—Ä–≥–æ–≤—ã–π –±–∞–ª–∞–Ω—Å</p>
                        <p>‚ö° –ú–≥–Ω–æ–≤–µ–Ω–Ω–æ–µ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏–µ</p>
                    </div>
                </div>
            </div>

        </div>
        
        <!-- –ü–∞–≥–∏–Ω–∞—Ü–∏—è (—Ç–æ—á–∫–∏) -->
        <div class="swiper-pagination"></div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Ç–æ—Ä–≥–æ–≤–ª–∏ -->
    <div id="tradeModal" class="modal">
        <div class="modal-content">
            <h2>–û—Ç–∫—Ä—ã—Ç–∏–µ —Å–¥–µ–ª–∫–∏</h2>
            <div class="trade-details">
                <div class="detail-row">
                    <span>–ú–æ–Ω–µ—Ç–∞:</span>
                    <span id="modalCoin">BTC</span>
                </div>
                <div class="detail-row">
                    <span>–ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:</span>
                    <span id="modalDirection" class="buy-text">LONG</span>
                </div>
                <div class="detail-row">
                    <span>–ü–ª–µ—á–æ:</span>
                    <span id="modalLeverage">2x</span>
                </div>
                <div class="detail-row">
                    <span>–¶–µ–Ω–∞ –≤—Ö–æ–¥–∞:</span>
                    <span id="modalPrice">$50,000</span>
                </div>
            </div>
            
            <div class="amount-input">
                <label>–°—É–º–º–∞ ($):</label>
                <input type="number" id="tradeAmount" min="1" max="10000" value="100">
                <div class="amount-slider">
                    <input type="range" id="amountSlider" min="1" max="10000" value="100">
                </div>
            </div>
            
            <div class="stop-inputs">
                <div class="stop-input">
                    <label>–°—Ç–æ–ø-–ª–æ—Å—Å (%)</label>
                    <input type="number" id="stopLoss" min="0" max="100" step="0.1" placeholder="0">
                </div>
                <div class="stop-input">
                    <label>–¢–µ–π–∫-–ø—Ä–æ—Ñ–∏—Ç (%)</label>
                    <input type="number" id="takeProfit" min="0" max="1000" step="0.1" placeholder="0">
                </div>
            </div>
            
            <div class="modal-buttons">
                <button class="modal-btn cancel-btn" onclick="closeTradeModal()">–û—Ç–º–µ–Ω–∞</button>
                <button class="modal-btn confirm-btn" onclick="executeTrade()">–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å</button>
            </div>
        </div>
    </div>

    <!-- –ú–µ–Ω—é –ø–æ–∫—É–ø–∫–∏ Stars -->
    <div id="buyMenu" class="modal">
        <div class="modal-content">
            <h2>‚≠ê –ü–æ–∫—É–ø–∫–∞ –¥–æ–ª–ª–∞—Ä–æ–≤</h2>
            <p class="modal-description">–ü–æ–ø–æ–ª–Ω–∏—Ç–µ —Ç–æ—Ä–≥–æ–≤—ã–π –±–∞–ª–∞–Ω—Å —á–µ—Ä–µ–∑ Telegram Stars</p>
            
            <div class="stars-packages-modal">
                <div class="package-modal" onclick="selectPackage(100, 10)">
                    <div class="stars-icon">100 ‚≠ê</div>
                    <div class="package-info">
                        <div class="package-amount">$10</div>
                        <div class="package-bonus-small">+ $1 –±–æ–Ω—É—Å</div>
                    </div>
                </div>
                
                <div class="package-modal" onclick="selectPackage(500, 55)">
                    <div class="stars-icon">500 ‚≠ê</div>
                    <div class="package-info">
                        <div class="package-amount">$55</div>
                        <div class="package-bonus-small">+ $5.5 –±–æ–Ω—É—Å</div>
                    </div>
                </div>
                
                <div class="package-modal" onclick="selectPackage(1000, 120)">
                    <div class="stars-icon">1000 ‚≠ê</div>
                    <div class="package-info">
                        <div class="package-amount">$120</div>
                        <div class="package-bonus-small">+ $24 –±–æ–Ω—É—Å</div>
                    </div>
                </div>
            </div>
            
            <div class="selected-package" id="selectedPackage">
                <span>–í—ã–±—Ä–∞–Ω–æ: </span>
                <span id="selectedAmount">0 ‚≠ê = $0</span>
            </div>
            
            <div class="modal-buttons">
                <button class="modal-btn cancel-btn" onclick="closeBuyMenu()">–û—Ç–º–µ–Ω–∞</button>
                <button class="modal-btn confirm-btn" onclick="processStarsPayment()">
                    –ö—É–ø–∏—Ç—å –∑–∞ <span id="starsCount">0</span> ‚≠ê
                </button>
            </div>
        </div>
    </div>

    <!-- –ê–¥–º–∏–Ω –∫–Ω–æ–ø–∫–∞ (—Ç–æ–ª—å–∫–æ –¥–ª—è –∞–¥–º–∏–Ω–æ–≤) -->
    <div id="adminButton" class="admin-button">
        <a href="admin.html">‚öôÔ∏è –ê–¥–º–∏–Ω</a>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
    <script src="auth.js"></script>
    <script src="script.js"></script>
    <script src="payment.js"></script>
</body>
</html>
